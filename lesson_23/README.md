# Lesson 23: Рандомізовані алгоритми

Приклади різних типів рандомізованих алгоритмів: Monte Carlo, Las Vegas та алгоритми з ймовірнісними гарантіями.

---

## Базові приклади Monte Carlo (для практики)

### 1. **01_coin.py** - Підкидання монети

**Що показує:** Закон великих чисел

- Симулюємо 100,000 підкиданнь монети (0 = орел, 1 = решка)
- Графік показує як ймовірність збігається до 0.5
- **Концепція:** При великій кількості експериментів результат наближається до теоретичного

---

### 2. **02_dice.py** - Кидання одного кубика

**Що показує:** Рівномірний розподіл

- Симулюємо 1,000,000 кидків кубика
- Гістограма показує що всі грані (1-6) мають однакову ймовірність ~16.67%
- **Концепція:** Перевірка рівномірності випадкового генератора

---

### 3. **03_pi_calculate.py** - Обчислення числа π

**Що показує:** Monte Carlo для обчислення констант

- Кидаємо випадкові точки у квадрат [-1,1] × [-1,1]
- Рахуємо скільки точок потрапило у вписане коло (r=1)
- π ≈ 4 × (точки в колі / всі точки)
- **Візуалізація:** Сині точки всередині кола, червоні поза ним
- **Паралелізація:** Можна запустити 1000 процесів для точності
- **Концепція:** Геометрична ймовірність, обчислення через площі

---

## КЛАСИФІКАЦІЯ

### 4. **miller_rabin.py** - Тест простоти Міллера-Рабіна

**Тип:** Monte Carlo

**Що показує:** Ймовірнісний тест простоти чисел

- Вхід: число n, кількість ітерацій k
- Вихід: "просте" або "складене"
- **Гарантія:** Якщо каже "складене" → 100% складене
- **Ймовірність помилки:** Якщо каже "просте" → може помилитись з P ≤ (1/4)^k
- **Час:** Детермінований O(k log³ n)
- **Застосування:** Криптографія (генерація великих простих чисел для RSA)

**Приклад:**

```python
is_prime(17)   # → True (точно просте)
is_prime(561)  # → False (561 = 3×11×17, точно складене)
is_prime(1009) # → True (ймовірність помилки < 10^-12 при k=20)
```

---

### 5. **quick_sort.py** - Рандомізоване швидке сортування

**Тип:** Las Vegas

**Що показує:** Алгоритм завжди правильний, але випадковий час

- Вхід: несортований масив
- Вихід: відсортований масив (завжди правильно!)
- **Час:** Випадковий, середній O(n log n), гірший O(n²)
- **Ймовірність гіршого випадку:** Дуже мала (1/2)^n
- **Застосування:** Стандартне сортування в багатьох мовах програмування

**Чому випадковий pivot кращий:**

- Детерміновані pivot → можна спеціально зламати (DOS атака)
- Випадковий pivot → неможливо передбачити гірший випадок

---

### 6. **hash_table.py** - Універсальне хешування

**Тип:** Рандомізований алгоритм з ймовірнісними гарантіями

**Що показує:** Захист від атак на хеш-таблиці

- Формула: `h(x) = ((a×x + b) mod p) mod m`
- Параметри a, b вибираються випадково один раз
- **Гарантія:** P(колізія для будь-яких x≠y) ≤ 1/m
- **Час:** Завжди O(1)
- **Застосування:** Словники (dict), множини (set), захист від DoS

**Демонстрація:**

- Показує розподіл 1000 ключів по корзинам
- Візуалізація рівномірності █████
- Порівняння з теоретичним очікуванням

**Детальне пояснення:** Дивись `universal_hashing_explained.md`

---

## Марковські ланцюги та їх застосування

### 7. **markov.py** - Базовий приклад Марковського ланцюга

**Що показує:** Знаходження стаціонарного розподілу через матрицю переходів

- **Стани:** 3 стани (A, B, C) - можуть представляти сайти, погоду, стан системи
- **Матриця переходів P:** Ймовірності переходів між станами
- **Властивість Маркова:** Наступний стан залежить тільки від поточного
- **Стаціонарний розподіл π:** Розподіл який не змінюється: π × P = π

**Демонстрація:**

- Ітеративне обчислення розподілу
- Графік збіжності
- Перевірка що сума рядків матриці = 1 (стохастична матриця)

**Концепція:** Марковські ланцюги моделюють системи з випадковими переходами між станами.

---

### 8. **pagerank_simple.py** - PageRank як Марковський процес

**Що показує:** Алгоритм Google PageRank через Марковські ланцюги

- **Модель:** Випадковий користувач блукає по інтернету, клікаючи посилання
- **Стани:** Сайти (Wikipedia, GitHub, Medium)
- **Переходи:** Посилання між сайтами
- **PageRank:** Частка часу, яку користувач проводить на кожному сайті

**Результат:**

- Wikipedia: 40% часу
- GitHub: 20% часу
- Medium: 40% часу

**Ключова ідея:** PageRank = стаціонарний розподіл Марковського ланцюга!

**Детальне пояснення:** Дивись `pagerank_explained.md`

---

## Класифікація алгоритмів

| Файл               | Тип                | Правильність            | Час                 | Застосування        |
| ------------------ | ------------------ | ----------------------- | ------------------- | ------------------- |
| 01_coin.py         | Monte Carlo        | Збігається до 0.5       | O(n)                | Демонстрація        |
| 02_dice.py         | Monte Carlo        | Збігається до теорії    | O(n)                | Демонстрація        |
| 03_pi_calculate.py | Monte Carlo        | Наближення π            | O(n)                | Обчислення констант |
| markov.py          | Марковський процес | Точний (стаціонарний)   | O(n² × k)           | Моделювання систем  |
| pagerank_simple.py | Марковський процес | Точний (PageRank)       | O(n² × k)           | Ранжування сайтів   |
| miller_rabin.py    | **Monte Carlo**    | Ймовірнісна (≤ (1/4)^k) | O(k log³ n)         | Криптографія        |
| quick_sort.py      | **Las Vegas**      | Завжди правильно        | Середній O(n log n) | Сортування          |
| hash_table.py      | Інше               | Ймовірнісні гарантії    | O(1)                | Структури даних     |

---

## Ключові концепції

### Monte Carlo

- **Детермінований час**, ймовірнісна правильність
- Можна зменшити ймовірність помилки (більше ітерацій)
- Приклади: Miller-Rabin, симуляція π, coin/dice
- Застосування: Криптографія, фізика, фінанси

### Las Vegas

- **Завжди правильний результат**, випадковий час
- Можна покращити середній випадок
- Приклади: Randomized QuickSort
- Застосування: Сортування, пошук

### Інші рандомізовані алгоритми

- Універсальне хешування: ймовірнісні гарантії про розподіл

### Загальні принципи

1. **Закон великих чисел** - при N→∞ результат → теоретичне значення
2. **Компроміс точність/швидкість** - більше ітерацій = менша помилка
3. **Захист від атак** - рандомізація робить гірший випадок непередбачуваним

---

## Документація

- `pagerank_explained.md` - пояснення PageRank та зв'язку з Марковськими ланцюгами
- `universal_hashing_explained.md` - детальне пояснення універсального хешування
