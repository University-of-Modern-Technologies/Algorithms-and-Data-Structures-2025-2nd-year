# PageRank - Пояснення

**Алгоритм PageRank** є одним із найвідоміших прикладів застосування марковських ланцюгів, розроблених для оцінювання «ваги» вебсторінок в інтернеті. У цій моделі кожна вебсторінка представлена як стан, а переходи між ними відбуваються за допомогою посилань.

Таким чином, імовірність переходу між станами визначається на основі наявних посилань на сторінках.

- Стан — вебсторінка.
- Перехідна ймовірність — імовірність переходу на іншу сторінку через посилання або випадковий перехід.
- Нерухомий розподіл — PageRank кожної сторінки, це значення, яке показує ймовірність того, що «випадковий серфер», переходячи по посиланнях, потрапить на цю сторінку в довгостроковій перспективі.

## Основна ідея

**Питання:** Який сайт найважливіший?

**Відповідь:** Той, де випадковий користувач проводить більше часу.

---

## Модель

Користувач випадково клікає посилання:

```
Start: Wikipedia
  ↓ клік (50%)
GitHub
  ↓ клік (100%)
Medium
  ↓ клік (100%)
Wikipedia
  ↓ ...
```

Після багатьох кліків рахуємо статистику:

- Wikipedia: 40% часу
- GitHub: 20% часу
- Medium: 40% часу

**Це і є PageRank!**

---

## Чому ітерації?

**Проблема:** Циклічна залежність

```
PageRank(Wikipedia) залежить від PageRank(Medium)
PageRank(Medium) залежить від PageRank(Wikipedia)
```

**Рішення:** Починаємо з припущення (всі рівні), потім уточнюємо:

```python
rank = [0.33, 0.33, 0.33]  # Припущення
rank = rank @ P            # Уточнення 1
rank = rank @ P            # Уточнення 2
...                        # Поки не стабілізується
```

Кожна ітерація = один "клік" користувача.

---

## Зв'язок з Марковськими процесами

PageRank = стаціонарний розподіл Марковського ланцюга.

| Марков                | PageRank                          |
| --------------------- | --------------------------------- |
| Стани                 | Сайти (Wikipedia, GitHub, Medium) |
| Переходи              | Посилання між сайтами             |
| Матриця P             | Ймовірності переходів             |
| Стаціонарний розподіл | PageRank кожного сайту            |

**Властивість Маркова:** Наступний сайт залежить тільки від поточного, не від історії.

**Стаціонарний розподіл:** π такий, що π × P = π

Це означає: якщо rank досяг π, то при наступному множенні на P він не зміниться.

```
rank₀ → rank₁ → rank₂ → ... → π → π → π (стабілізувався)
```

---

## Чому всі сайти рівні (0.333)?

Симетрична структура:

```
Wikipedia → GitHub, Medium   (50/50)
GitHub → Medium              (100%)
Medium → Wikipedia           (100%)
```

Кожен сайт в однаковій позиції циклу → однаковий PageRank.

У реальному інтернеті структура асиметрична → різний PageRank.

---

## Код (pagerank_simple.py)

```python
# Матриця переходів
P = np.array([
    [0, 0.5, 0.5],  # Wikipedia
    [0, 0, 1.0],    # GitHub
    [0, 1.0, 0],    # Medium
])

# Ітерації
rank = [0.33, 0.33, 0.33]
for _ in range(20):
    rank = rank @ P

# Результат: [0.40, 0.20, 0.40]
```

---

## Висновок

1. **PageRank** = частка часу випадкового користувача на сайті
2. **Ітерації** = послідовні уточнення: rank₀, rank₁, rank₂, ... → π
3. **Збіжність** = знаходження π (стаціонарного розподілу) де π × P = π
