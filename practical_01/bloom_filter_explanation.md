# Алгоритм Блума (Bloom Filter)

## Вступ

Фільтр Блума (Bloom Filter) - це ймовірнісна структура даних, яка використовується для перевірки, чи належить елемент до множини. Він був запропонований Бертоном Говардом Блумом у 1970 році. Фільтр Блума не зберігає самі елементи, а лише інформацію про їх присутність у вигляді бітового масиву.

## Принцип роботи

### Основні компоненти

1. **Бітовий масив** (bit array) - масив бітів фіксованого розміру, спочатку заповнений нулями
2. **Кількість хеш-функцій** (k) - визначена кількість хеш-функцій
3. **Розмір бітового масиву** (m) - довжина бітового масиву

### Операції

#### Додавання елемента (add)

Коли додається новий елемент:

1. Для кожного з k хеш-функцій обчислюється хеш елемента
2. Індекс у бітовому масиві обчислюється як `hash % m`
3. Відповідний біт встановлюється в 1

#### Перевірка наявності елемента (contains)

Для перевірки, чи міститься елемент у фільтрі:

1. Для кожного з k хеш-функцій обчислюється хеш елемента
2. Перевіряється, чи всі відповідні біти дорівнюють 1
3. Якщо всі біти встановлені - елемент, ймовірно, присутній
4. Якщо хоча б один біт не встановлений - елемент відсутній

![Схематична ілюстрація Bloom Filter](https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/Bloom_filter.svg/2560px-Bloom_filter.svg.png)

## Переваги

- **Швидкість**: Операції додавання та перевірки виконуються за сталий час O(k)
- **Економія пам'яті**: Використовує значно менше пам'яті порівняно з іншими структурами даних
- **Немає зберігання елементів**: Не зберігає самі елементи, лише їх "відбитки"

## Недоліки

- **Ймовірність помилок**: Можливі хибно-позитивні результати (false positives) - фільтр може повідомити про присутність елемента, якого насправді немає
- **Неможливість видалення**: Стандартний фільтр Блума не підтримує видалення елементів
- **Фіксований розмір**: Розмір бітового масиву визначається заздалегідь

## Ймовірність помилок

Ймовірність хибно-позитивного результату можна оцінити за формулою:

P ≈ (1 - e^(-k\*n/m))^k

де:

- n - кількість доданих елементів
- m - розмір бітового масиву
- k - кількість хеш-функцій

## Застосування

Фільтри Блума широко використовуються в:

- Кешування та бази даних (наприклад, в Cassandra, Redis)
- Мережеві протоколи (наприклад, в BGP для перевірки маршрутів)
- Пошукові системи (для швидкої фільтрації результатів)
- Блокчейн та криптовалюти
- Антивірусне програмне забезпечення

## Висновок

Фільтр Блума є потужним інструментом для задач, де важлива швидкість та економія пам'яті, а невелика ймовірність помилок є прийнятною. Він особливо корисний у сценаріях, де потрібно швидко перевірити, чи може елемент бути присутнім у великій множині даних.
