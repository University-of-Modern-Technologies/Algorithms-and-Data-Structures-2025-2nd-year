# Алгоритм Едмондса-Карпа (Edmonds-Karp Algorithm)

## Задача про максимальний потік
Уявіть мережу труб з різною пропускною здатністю. Є одне джерело (Source) і один стік (Sink). Скільки максимально води можна перекачати від джерела до стоку за одиницю часу? Це класична задача максимального потоку.

## Теоретичні основи: Метод Форда-Фалкерсона
Алгоритм Едмондса-Карпа є конкретною реалізацією загального методу Форда-Фалкерсона. Загальна ідея:
1. Почати з нульового потоку.
2. Знайти **збільшуючий шлях** (augmenting path) від джерела до стоку в **залишковій мережі**.
3. Пустити по цьому шляху максимально можливий потік (визначається найвужчим місцем шляху).
4. Повторювати, поки шляхи існують.

### Що таке залишкова мережа?
Якщо по ребру $(u, v)$ з пропускною здатністю $C$ вже тече потік $F$, то:
- Ми можемо додатково пустити $C - F$ потоку в прямому напрямку.
- Ми можемо "скасувати" до $F$ потоку, пустивши його у зворотному напрямку (віртуальне ребро $(v, u)$ з вагою $F$).

Це дозволяє алгоритму виправляти свої "помилки", перенаправляючи потік, якщо пізніше знайдеться кращий маршрут.

## Особливість Едмондса-Карпа
Ключова відмінність від загального методу Форда-Фалкерсона: для пошуку збільшуючого шляху **завжди використовується BFS (пошук у ширину)**.
Тобто ми завжди шукаємо шлях з **мінімальною кількістю ребер**, а не просто будь-який шлях (як міг би знайти DFS).

## Складність та переваги
- **Часова складність:** $O(V E^2)$.
- У звичайному Форді-Фалкерсоні час виконання залежить від величини максимального потоку $f^*$ ($O(E \cdot f^*)$), що може бути дуже повільно для великих пропускних здатностей.
- Використання BFS гарантує, що довжина найкоротшого шляху в залишковій мережі не спадає, а кожне ребро може ставати "критичним" (вузьким місцем) не більше $V/2$ разів. Це робить час виконання поліноміальним і незалежним від значень пропускної здатності.

## Теорема про максимальний потік і мінімальний розріз
Значення максимального потоку в мережі дорівнює пропускній здатності **мінімального розрізу**.
Розріз — це розділення вершин на дві множини (одна містить джерело, інша — стік). Пропускна здатність розрізу — сума пропускних здатностей ребер, що йдуть від множини джерела до множини стоку. Це важлива дуальність у теорії графів.
