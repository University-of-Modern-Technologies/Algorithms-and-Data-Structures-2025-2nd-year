class Task:
    """–ö–ª–∞—Å –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è –∑ —á–∞—Å–æ–º –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ç–∞ –≤–∞–≥–æ—é (–ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–æ–º)"""

    def __init__(self, time, weight=1, name=""):
        self.time = time  # —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤ –≥–æ–¥–∏–Ω–∞—Ö
        self.weight = weight  # –≤–∞–≥–∞/–ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç –∑–∞–≤–¥–∞–Ω–Ω—è
        self.name = name or f"Task({time}h, w={weight})"
        self.ratio = time / weight  # –¥–ª—è —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—É

    def __repr__(self):
        return (
            f"{self.name}: {self.time}h, weight={self.weight}, ratio={self.ratio:.2f}"
        )


def calculate_average_wait_time(tasks):
    """
    –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Å–µ—Ä–µ–¥–Ω—å–æ–≥–æ —á–∞—Å—É –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç–∞.

    –î–ª—è –∫–æ–∂–Ω–æ–≥–æ –∫–ª—ñ—î–Ω—Ç–∞ —á–∞—Å –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è = —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤—Å—ñ—Ö –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –∑–∞–≤–¥–∞–Ω—å + –π–æ–≥–æ –≤–ª–∞—Å–Ω–µ.
    –°–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Å = —Å—É–º–∞ –≤—Å—ñ—Ö —á–∞—Å—ñ–≤ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è / –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–≤–¥–∞–Ω—å.
    """
    cumulative_time = 0
    total_wait = 0
    wait_times = []

    for task in tasks:
        cumulative_time += task.time
        wait_times.append(cumulative_time)
        total_wait += cumulative_time

    avg_wait = total_wait / len(tasks)
    return avg_wait, wait_times


def schedule_by_shortest_time(tasks):
    """
    –°–¢–†–ê–¢–ï–ì–Ü–Ø 1: –ú—ñ–Ω—ñ–º—ñ–∑–∞—Ü—ñ—è —Å–µ—Ä–µ–¥–Ω—å–æ–≥–æ —á–∞—Å—É –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç–∞.

    –ñ–ê–î–Ü–ë–ù–ò–ô –ü–†–ò–ù–¶–ò–ü: —Å–ø–µ—Ä—à—É –≤–∏–∫–æ–Ω—É—î–º–æ –Ω–∞–π–∫–æ—Ä–æ—Ç—à–µ –∑–∞–≤–¥–∞–Ω–Ω—è.

    –ß–æ–º—É —Ü–µ –ø—Ä–∞—Ü—é—î:
    - –ü–µ—Ä—à–µ –∑–∞–≤–¥–∞–Ω–Ω—è –≤—Ö–æ–¥–∏—Ç—å —É –∫—É–º—É–ª—è—Ç–∏–≤–Ω—É —Å—É–º—É —Å—Ç—ñ–ª—å–∫–∏ —Ä–∞–∑—ñ–≤, —Å–∫—ñ–ª—å–∫–∏ –≤—Å—å–æ–≥–æ –∑–∞–≤–¥–∞–Ω—å
    - –Ø–∫—â–æ –ø–æ—á–Ω–µ–º–æ –∑ –¥–æ–≤–≥–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è, –≤–æ–Ω–æ –∑–±—ñ–ª—å—à–∏—Ç—å —Å–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Å –¥–ª—è –≤—Å—ñ—Ö
    - –Ø–∫—â–æ –ø–æ—á–Ω–µ–º–æ –∑ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ, —Ç–æ –≤–æ–Ω–æ –º–µ–Ω—à–µ –≤–ø–ª–∏–Ω–µ –Ω–∞ –∑–∞–≥–∞–ª—å–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

    –°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å: O(n log n) —á–µ—Ä–µ–∑ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è
    """
    # –°–æ—Ä—Ç—É—î–º–æ –∑–∞ —á–∞—Å–æ–º –≤–∏–∫–æ–Ω–∞–Ω–Ω—è (–Ω–∞–π–∫–æ—Ä–æ—Ç—à—ñ —Å–ø–æ—á–∞—Ç–∫—É)
    sorted_tasks = sorted(tasks, key=lambda x: x.time)
    avg_wait, wait_times = calculate_average_wait_time(sorted_tasks)

    print("=" * 70)
    print("–°–¢–†–ê–¢–ï–ì–Ü–Ø 1: –ú—ñ–Ω—ñ–º—ñ–∑–∞—Ü—ñ—è —Å–µ—Ä–µ–¥–Ω—å–æ–≥–æ —á–∞—Å—É –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è")
    print("–ü—Ä–∏–Ω—Ü–∏–ø: –≤–∏–∫–æ–Ω—É—î–º–æ –Ω–∞–π–∫–æ—Ä–æ—Ç—à–µ –∑–∞–≤–¥–∞–Ω–Ω—è —Å–ø–µ—Ä—à—É")
    print("-" * 70)
    print("–ü–æ—Ä—è–¥–æ–∫ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:")
    for i, task in enumerate(sorted_tasks, 1):
        print(f"  {i}. {task.name} ‚Äî –∫–ª—ñ—î–Ω—Ç –æ—Ç—Ä–∏–º–∞—î —Ä–æ–±–æ—Ç—É —á–µ—Ä–µ–∑ {wait_times[i-1]}h")
    print(f"\n–°–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Å –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç–∞: {avg_wait:.2f} –≥–æ–¥–∏–Ω")
    print("=" * 70)

    return sorted_tasks, avg_wait


def schedule_by_priority(tasks):
    """
    –°–¢–†–ê–¢–ï–ì–Ü–Ø 2: –í–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω—å –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—É (–≤–∞–≥–∏).

    –ñ–ê–î–Ü–ë–ù–ò–ô –ü–†–ò–ù–¶–ò–ü: –º—ñ–Ω—ñ–º—ñ–∑—É—î–º–æ –∑–≤–∞–∂–µ–Ω–∏–π —Å–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Å –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è.

    –ê–ª–≥–æ—Ä–∏—Ç–º:
    1. –î–ª—è –∫–æ–∂–Ω–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è —Ä–æ–∑—Ä–∞—Ö–æ–≤—É—î–º–æ ratio = time / weight
    2. –°–æ—Ä—Ç—É—î–º–æ –∑–∞ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è–º ratio (–Ω–∞–π–º–µ–Ω—à–∏–π —Å–ø–æ—á–∞—Ç–∫—É)
    3. –ó–∞–≤–¥–∞–Ω–Ω—è –∑ –º–µ–Ω—à–∏–º ratio –æ–∑–Ω–∞—á–∞—î "–≤–∏—Å–æ–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–µ –≤—ñ–¥–Ω–æ—Å–Ω–æ —á–∞—Å—É"

    –ü—Ä–∏–∫–ª–∞–¥: –∑–∞–≤–¥–∞–Ω–Ω—è (11h, weight=50) –º–∞—î ratio=0.22 ‚Äî –¥—É–∂–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–µ
             –∑–∞–≤–¥–∞–Ω–Ω—è (10h, weight=20) –º–∞—î ratio=0.5 ‚Äî –º–µ–Ω—à –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–µ

    –°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å: O(n log n) —á–µ—Ä–µ–∑ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è
    """
    # –°–æ—Ä—Ç—É—î–º–æ –∑–∞ ratio (—á–∞—Å/–≤–∞–≥–∞) ‚Äî –Ω–∞–π–º–µ–Ω—à–∏–π —Å–ø–æ—á–∞—Ç–∫—É
    sorted_tasks = sorted(tasks, key=lambda x: x.ratio)
    avg_wait, wait_times = calculate_average_wait_time(sorted_tasks)

    # –†–æ–∑—Ä–∞—Ö–æ–≤—É—î–º–æ –∑–≤–∞–∂–µ–Ω–∏–π —Å–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Å
    weighted_total = sum(
        wait_times[i] * task.weight for i, task in enumerate(sorted_tasks)
    )
    total_weight = sum(task.weight for task in sorted_tasks)
    weighted_avg = weighted_total / total_weight

    print("\n" + "=" * 70)
    print("–°–¢–†–ê–¢–ï–ì–Ü–Ø 2: –í–∏–∫–æ–Ω–∞–Ω–Ω—è –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—É (–º'—è–∫–∏–π –¥–µ–¥–ª–∞–π–Ω)")
    print("–ü—Ä–∏–Ω—Ü–∏–ø: —Å–æ—Ä—Ç—É—î–º–æ –∑–∞ ratio = time/weight, –Ω–∞–π–º–µ–Ω—à–∏–π —Å–ø–æ—á–∞—Ç–∫—É")
    print("-" * 70)
    print("–ü–æ—Ä—è–¥–æ–∫ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:")
    for i, task in enumerate(sorted_tasks, 1):
        print(
            f"  {i}. {task.name} (ratio={task.ratio:.2f}) "
            f"‚Äî –∫–ª—ñ—î–Ω—Ç –æ—Ç—Ä–∏–º–∞—î —á–µ—Ä–µ–∑ {wait_times[i-1]}h"
        )
    print(f"\n–°–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Å –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è: {avg_wait:.2f} –≥–æ–¥–∏–Ω")
    print(f"–ó–≤–∞–∂–µ–Ω–∏–π —Å–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Å: {weighted_avg:.2f} –≥–æ–¥–∏–Ω")
    print("=" * 70)

    return sorted_tasks, weighted_avg


def compare_schedules(tasks):
    """
    –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω—å —É –ø–æ—á–∞—Ç–∫–æ–≤–æ–º—É –ø–æ—Ä—è–¥–∫—É vs –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ–º—É.
    """
    print("\n" + "=" * 70)
    print("–ü–û–ß–ê–¢–ö–û–í–ò–ô –ü–û–†–Ø–î–û–ö (–±–µ–∑ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó)")
    print("-" * 70)
    avg_wait_orig, wait_times_orig = calculate_average_wait_time(tasks)
    for i, task in enumerate(tasks, 1):
        print(f"  {i}. {task.name} ‚Äî –∫–ª—ñ—î–Ω—Ç –æ—Ç—Ä–∏–º–∞—î —á–µ—Ä–µ–∑ {wait_times_orig[i-1]}h")
    print(f"\n–°–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Å –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è: {avg_wait_orig:.2f} –≥–æ–¥–∏–Ω")
    print("=" * 70)

    # –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è
    _, avg_optimized = schedule_by_shortest_time(tasks)

    print(f"\n–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è: {avg_wait_orig:.2f}h ‚Üí {avg_optimized:.2f}h")
    print(
        f"–í–∏–≥—Ä–∞—à: {avg_wait_orig - avg_optimized:.2f} –≥–æ–¥–∏–Ω ({(1 - avg_optimized/avg_wait_orig)*100:.1f}%)"
    )


if __name__ == "__main__":
    # –ü—Ä–∏–∫–ª–∞–¥ 1: –ó–∞–≤–¥–∞–Ω–Ω—è –±–µ–∑ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—ñ–≤ (–∑ —Ç–µ–∫—Å—Ç—É)
    print("\n" + "üî∑" * 35)
    print("–ü–†–ò–ö–õ–ê–î 1: –ß–æ—Ç–∏—Ä–∏ –∑–∞–≤–¥–∞–Ω–Ω—è –ø—Ä–æ–≥—Ä–∞–º—ñ—Å—Ç–∞-—Ñ—Ä–∏–ª–∞–Ω—Å–µ—Ä–∞")
    print("–ó–∞–≤–¥–∞–Ω–Ω—è: 10, 5, 11, 3 –≥–æ–¥–∏–Ω–∏")
    print("üî∑" * 35)

    tasks_simple = [
        Task(10, name="–ó–∞–≤–¥–∞–Ω–Ω—è 1"),
        Task(5, name="–ó–∞–≤–¥–∞–Ω–Ω—è 2"),
        Task(11, name="–ó–∞–≤–¥–∞–Ω–Ω—è 3"),
        Task(3, name="–ó–∞–≤–¥–∞–Ω–Ω—è 4"),
    ]

    compare_schedules(tasks_simple)

    # –ü—Ä–∏–∫–ª–∞–¥ 2: –ó–∞–≤–¥–∞–Ω–Ω—è –∑ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∞–º–∏
    print("\n\n" + "üî∂" * 35)
    print("–ü–†–ò–ö–õ–ê–î 2: –ó–∞–≤–¥–∞–Ω–Ω—è –∑ –≤–∞–≥–∞–º–∏ (–ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∞–º–∏)")
    print("(—á–∞—Å, –≤–∞–≥–∞): (10, 20), (5, 20), (11, 50), (3, 10)")
    print("üî∂" * 35)

    tasks_weighted = [
        Task(10, weight=20, name="–ó–∞–≤–¥–∞–Ω–Ω—è A"),
        Task(5, weight=20, name="–ó–∞–≤–¥–∞–Ω–Ω—è B"),
        Task(11, weight=50, name="–ó–∞–≤–¥–∞–Ω–Ω—è C"),  # –Ω–∞–π–≤–∞–∂–ª–∏–≤—ñ—à–µ
        Task(3, weight=10, name="–ó–∞–≤–¥–∞–Ω–Ω—è D"),  # –Ω–∞–π–º–µ–Ω—à –≤–∞–∂–ª–∏–≤–µ
    ]

    # –°–ø–æ—á–∞—Ç–∫—É –±–µ–∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—ñ–≤
    schedule_by_shortest_time(tasks_weighted)

    # –¢–µ–ø–µ—Ä –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—ñ–≤
    schedule_by_priority(tasks_weighted)

    print("\n" + "üìå" * 35)
    print(
        "–í–ò–°–ù–û–í–û–ö: –ñ–∞–¥—ñ–±–Ω—ñ –∞–ª–≥–æ—Ä–∏—Ç–º–∏ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–æ–∑–≤'—è–∑—É—é—Ç—å –∑–∞–¥–∞—á—ñ –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è.\n"
        "–ö–ª—é—á –¥–æ —É—Å–ø—ñ—Ö—É ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –≤–∏–±—ñ—Ä –∫—Ä–∏—Ç–µ—Ä—ñ—é –∂–∞–¥—ñ–±–Ω–æ—Å—Ç—ñ (—á–∞—Å, ratio —Ç–æ—â–æ)."
    )
    print("üìå" * 35 + "\n")
